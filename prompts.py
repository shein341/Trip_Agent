# ====================
# Prompt Templates
# ====================

RESEARCH_PROMPT = """请根据以下【实时搜索结果】调研旅行信息：
出发：{departure} -> 目的：{destination}
时间：{start_date} 至 {end_date}

【实时搜索结果】
{search_results}

请以 JSON 格式返回核心信息（基于搜索结果，不要瞎编）：
{{
    "transport": "交通建议及价格 (基于搜索)",
    "attractions": ["景点1(票价)", "景点2(票价)", ...],
    "food": ["美食1(均价)", ...],
    "weather": "天气及穿衣 (基于搜索)",
    "tips": "注意事项"
}}"""

DRAFT_SKELETON_PROMPT = """请为以下旅行制定预算分配骨架。
预算：{budget}元

请以 JSON 格式返回（确保总和接近{budget}）：
{{
    "budget_allocation": {{
        "交通": 1000,
        "住宿": 1500,
        "餐饮": 500,
        "门票": 500,
        "其他": 500
    }},
    "daily_themes": ["Day1: ...", "Day2: ..."]
}}"""

DRAFT_PLAN_PROMPT = """基于以下调研结果和方案骨架，整合制定一份完整的旅行方案：

【目的地调研】
{research_result}

【方案骨架】
{draft_skeleton}

【用户需求】
- 预算：{budget} 元
- 出发地：{departure}
- 目的地：{destination}
- 时间：{start_date} 至 {end_date}

请整合以上信息，制定包含以下内容的详细方案：
1. 每日行程安排（包含具体景点和餐饮）
2. 预算分配明细（交通、住宿、餐饮、门票、其他）- 请给出具体金额
3. 总花费

请确保方案详细且预算合理。"""

BUDGET_REVIEW_PROMPT = """你是一位严格的财务审核员。请审核以下旅行方案是否符合预算要求：

【用户预算】{budget} 元

【旅行方案】
{draft_plan}

审核要求：
1. 检查预计总花费是否超出预算
2. 检查各项分配是否合理
3. 评估方案的可行性

请按以下格式回复：
状态：approved 或 rejected
理由：（简要说明）
修改建议：（如果rejected，给出具体的修改建议）"""

REVISE_PLAN_PROMPT = """请根据审核反馈修改旅行方案：

【原方案】
{draft_plan}

【审核反馈】
{budget_feedback}

【预算限制】{budget} 元

请修改方案，确保：
1. 总花费控制在预算内
2. 保留核心体验
3. 提供具体的省钱建议

请输出修改后的完整方案。"""

FINALIZE_ITINERARY_PROMPT = """请将以下旅行方案整理为精美的最终行程单：

【已审核方案】
{draft_plan}

【目的地信息】
{research_result}

请按以下格式输出（不要使用 Markdown 表格）：

# 🧳 {destination}旅行计划

## 📅 行程概览
- **出发地**：{departure}
- **目的地**：{destination}
- **出行日期**：{start_date} 至 {end_date}
- **总预算**：{budget} 元

## 🗓️ 每日行程
每天使用列表格式描述

## 💰 预算明细
使用列表格式

## 📝 温馨提示
使用要点列表

请使用 emoji 美化输出。"""

CONTENT_REVIEW_PROMPT = """你是一位资深的旅游文案编辑。请对以下旅行规划进行质量审核：

【旅行规划文案】
{final_plan}

请从以下三个维度进行审核：

1. **字数审核**：
   - 每日行程描述是否足够详细（每天至少 100 字）
   - 是否提供了足够的实用信息

2. **文采审核**：
   - 语言是否生动有趣
   - 是否有吸引力和感染力
   - emoji 使用是否恰当

3. **实用性审核**（重点检查）：
   - 景点信息是否可能过时
   - 价格信息是否合理（2024-2026年标准）
   - 交通建议是否实际可行
   - 是否需要添加季节性提醒

请按以下格式回复：

**审核结果**：通过 / 需修改

**评分**：
- 字数充实度：⭐⭐⭐⭐⭐ (x/5)
- 文采表现力：⭐⭐⭐⭐⭐ (x/5)
- 实用性评分：⭐⭐⭐⭐⭐ (x/5)

**具体反馈**：
（列出需要改进或补充的具体内容）

**优化建议**：
（如果需要修改，给出具体的修改建议）"""

POLISH_CONTENT_PROMPT = """请根据审核反馈优化旅行规划文案：

【当前文案】
{final_plan}

【审核反馈】
{content_review_feedback}

请优化文案，确保：
1. 内容更加详实，每日行程描述充分
2. 语言生动有趣，富有感染力
3. 添加实用性提醒（如：建议提前预约、注意季节变化等）
4. 价格信息标注"参考价格，请以实际为准"
5. 不要使用 Markdown 表格语法，使用列表格式

请输出优化后的完整文案。"""

BUDGET_PARSING_PROMPT = """请从以下旅行方案中提取预算分配信息。

【旅行方案】
{plan}

请分析方案中提到的各项费用，返回 JSON 格式（只返回 JSON，不要其他内容）：
{{
  "交通": 预算金额数字,
  "住宿": 预算金额数字,
  "餐饮": 预算金额数字,
  "门票": 预算金额数字,
  "其他": 预算金额数字
}}

如果方案中没有明确金额，请根据总预算 {total_budget} 元合理估算。
确保所有金额加起来接近 {total_budget} 元。只返回 JSON。"""

CHAT_MODIFY_PROMPT = """你是一位专业的旅行规划师。用户希望修改他们的旅行方案。

【当前方案】
{current_plan}

【预算限制】{budget} 元
【目的地】{destination}

【用户的修改意见】
{user_message}

请根据用户的意见修改方案，确保：
1. 保持预算在限制范围内
2. 保留用户没有要求修改的部分
3. 清晰说明修改了哪些内容

请输出修改后的完整方案，使用 emoji 美化输出格式。"""

RESEARCH_DESTINATION_OLD_PROMPT = """你是一位专业的旅行顾问。请调研以下目的地的旅行信息：

目的地：{destination}
旅行时间：{start_date} 至 {end_date}

请提供：
1. 当地特色景点（3-5个）
2. 推荐美食
3. 交通方式建议
4. 当季天气和穿衣建议
5. 注意事项

请用简洁的要点形式回答。"""

CREATE_DRAFT_PLAN_OLD_PROMPT = """基于以下信息，制定一份详细的旅行方案：

【目的地调研】
{research_result}

【用户需求】
- 预算：{budget} 元
- 目的地：{destination}
- 时间：{start_date} 至 {end_date}

请制定包含以下内容的方案：
1. 每日行程安排
2. 预算分配明细（交通、住宿、餐饮、门票、其他）
3. 预计总花费

请确保方案详细且可执行。"""
